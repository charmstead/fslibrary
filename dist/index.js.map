{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":";;AAAA,qCAA+B;AAI/B;IAEI,mBAAY,YAAoB;QAQxB,cAAS,GAAY;YACzB,MAAM,EAAE,IAAI;YACZ,QAAQ,EAAE,GAAG;YACb,MAAM,EAAE,aAAa;YACrB,mBAAmB;YACnB,OAAO,EAAE,oBAAoB;SAChC,CAAC;QAQM,mBAAc,GAAW,gpBA6BpC,CAAC;QAjDM,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;IAErC,CAAC;IAiDD,iDAAiD;IACjD,0BAA0B;IAC1B,yCAAyC;IAEzC,8BAA8B;IAC9B,uDAAuD;IACvD,YAAY;IAEZ,uDAAuD;IAEvD,QAAQ;IACR,IAAI;IAEJ,sCAAsC;IAEtC,2BAA2B;IAC3B,gCAAgC;IAChC,eAAe;IACf,mDAAmD;IACnD,QAAQ;IACR,IAAI;IAEI,kCAAc,GAAtB,UAAuB,EAAoE;YAAlE,gBAAY,EAAZ,iCAAY,EAAE,cAAsB,EAAtB,2CAAsB,EAAE,iBAA0B,EAA1B,+CAA0B;QAErF,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,cAAc,EAAE,EAAE,GAAG,QAAQ,CAAC,CAAC;QACjF,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;QACtE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,eAAe,EAAE,SAAS,CAAC,CAAC;QAE9E,IAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QACvE,IAAM,KAAK,GAAQ,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACnD,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAExB,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;QACxB,IAAI,KAAK,CAAC,UAAU,EAAE;YAClB,sCAAsC;YACtC,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC;SAClD;aAAM;YACH,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;SACnE;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAED;;OAEG;IACI,2BAAO,GAAd;QAEI,qBAAqB;QACrB,IAAM,iBAAiB,GAAQ,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;QAE3F,qDAAqD;QACrD,iBAAiB,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,CACzB,iBAAiB,SAAE,MAAM,CAAC,UAAC,IAAI,EAAE,KAAK;YACtC,sBAAsB;YACtB,OAAW,IAAI,QAAK,KAAK,CAAC,SAAS,EAAC;QACxC,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAClB,CAAA;QAED,kCAAkC;QAClC,iBAAiB,CAAC,OAAO,CAAC,UAAC,IAAa,EAAE,CAAS;YAC/C,IAAI,CAAC,GAAG,CAAC,EAAE;gBACP,IAAI,CAAC,SAAS,GAAG,EAAE,CAAA;aACtB;QACL,CAAC,CAAC,CAAA;IAGN,CAAC;IAIM,4BAAQ,GAAf,UAAgB,MAAsH;QAAtI,iBA0DC;QA1De,uBAAA,EAAA,WAAqB,MAAM,EAAE,EAAE,EAAE,cAAc,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE,EAAE,YAAY,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE;QAGlI,IAAG,CAAC,MAAM,CAAC,cAAc;YAAE,OAAO;QAGlC,IAAI,MAAM,CAAC,SAAS,EAAE;YAClB,IAAM,OAAO,GAAG,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;YACzD,IAAA,qBAAuC,EAArC,sBAAQ,EAAE,kBAAM,CAAsB;YAC5C,QAAQ,GAAG,QAAQ,CAAA,CAAC,CAAC,QAAQ,GAAC,IAAI,CAAC,CAAC,CAAA,CAAC,CAAC;YACtC,MAAM,GAAG,MAAM,IAAI,QAAQ,CAAC;YAC5B,IAAI,CAAC,cAAc,CAAC,EAAE,QAAQ,UAAA,EAAE,MAAM,QAAA,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,CAAA;SAEhE;aACI;YACD,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;SAC3B;QAED,IAAM,MAAM,GAAQ,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC9D,IAAM,UAAU,GAAU,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QACzD,IAAM,KAAK,GAAU,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC;QACpE,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAEpB,IAAA,sBAAM,EAAE,sCAAc,EAAE,gCAAW,EAAE,kCAAY,CAAY;QAErE,IAAI,OAAO,GAAG,EAAE,CAAC;QACjB,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC,UAAC,KAAK,EAAE,CAAC;YAE5B,IAAI,CAAC,GAAG,WAAW,EAAE;gBACjB,OAAO,KAAK,CAAC;aAChB;YAED,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,EAAE,CAAC;YAC7B,OAAO,IAAI,CAAC;QAChB,CAAC,CAAC,CAAC;QAEG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAE,CAAC,OAAO,GAAG;YAC5C,IAAM,KAAK,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;YAC9C,KAAK,CAAC,GAAG,CAAC,UAAC,IAAI;gBACX,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAA;gBAClC,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,EAAE;oBACzC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,CAAA;gBAEzC,CAAC,CAAC,CAAA;gBACF,QAAQ,CAAC,aAAa,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YAChE,CAAC,CAAC,CAAA;YAEF,IAAI,KAAI,CAAC,QAAQ,EAAE;gBACf,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC;aACxC;YAED,IAAI,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;gBACf,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAE,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;aAChE;QACL,CAAC,CAAA;IAIL,CAAC;IAGD;;;;;;;;;OASG;IACI,8BAAU,GAAjB,UAAkB,MAA6D;QAA7D,uBAAA,EAAA,WAAqB,UAAU,EAAE,EAAE,EAAE,SAAS,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE;QAC3E,IAAM,MAAM,GAAQ,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACtD,IAAA,4BAAS,EAAE,oBAAK,EAAE,8BAAU,CAAY;QAEhD,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAErB,IAAI,SAAS,GAAG,CAAC,EAAE;YACf,MAAM,sCAAsC,CAAC;SAChD;aACI,IAAI,KAAK,GAAG,CAAC,EAAE;YAChB,MAAM,kCAAkC,CAAC;SAC5C;QAED,UAAU,CAAC,GAAG,CAAC,UAAC,EAAe;gBAAb,kBAAM,EAAE,YAAG;YACzB,IAAM,IAAI,GAAG,MAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;YAC7C,KAAK,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,SAAS,EAAE;gBAErD,IAAM,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAA;gBACpC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;oBACtC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,IAAI,GAAG,GAAG,KAAK,CAAA;iBACnC;gBAED,IAAI,SAAS,IAAI,CAAC,EAAE;oBAChB,MAAM;iBACT;aACJ;QACL,CAAC,CAAC,CAAA;IACN,CAAC;IAEO,wCAAoB,GAA5B;QAAA,iBAKC;QAHG,IAAM,aAAa,GAAQ,cAAM,OAAA,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,EAA3D,CAA2D,CAAC;QAC7F,4BAA4B;QAC5B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;IAClD,CAAC;IAEO,iCAAa,GAArB;QAAA,iBAkBC;QAhBG,IAAM,aAAa,GAAQ,cAAM,OAAA,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,EAA3D,CAA2D,CAAC;QAE7F,OAAO,CACH,aAAa,EAAE,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,CAAC;YACxB,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,GAAG,MAAM,CAAC;YACvC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,QAAQ,CAAC;YAClC,OAAO,CACH,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,CAAC;gBACrC,IAAM,WAAW,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBACjD,OAAO;oBACH,CAAC,EAAE,WAAW,CAAC,IAAI;oBACnB,CAAC,EAAE,WAAW,CAAC,GAAG;iBACrB,CAAC;YACN,CAAC,CAAC,CAAC,CAAA;QACX,CAAC,CAAC,CACL,CAAC;IACN,CAAC;IAED;;;OAGG;IACI,6BAAS,GAAhB,UAAiB,MAAuE;QAAxF,iBA+PC;QA/PgB,uBAAA,EAAA,WAAQ,UAAU,EAAE,EAAE,EAAE,WAAW,EAAC,QAAQ,EAAE,SAAS,EAAC,IAAI,CAAC,SAAS,EAAC;QAE/E,IAAA,8BAAU,EAAC,gCAAW,EAAC,4BAAS,CAAU;QAE/C,WAAW,GAAG,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAA,CAAC,OAAO,UAAU,IAAG,QAAQ,CAAC,CAAA,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC;QAE5F,IAAM,IAAI,GAAG,IAAI,CAAC;QAClB,IAAI,SAAS,EAAE;YACX,SAAS,CAAC,MAAM,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YAC7D,IAAM,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;YACtD,SAAS,CAAC,OAAO,GAAG,OAAO,CAAC;YAE5B,IAAI,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE;gBAC5C,SAAS,CAAC,OAAO,IAAI,uBAAuB,CAAA;aAC/C;YACD,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;SAC9B;QACD,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAC3B,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAA;QAEtB,IAAI,UAAU,GAAG,CAAC,CAAC;QACnB,IAAM,EAAE,GAAG,EAAE,CAAC;QACd,IAAM,KAAK,GAAG,EAAE,CAAC;QAEjB,IAAM,WAAW,GAAG,EAAE,CAAA;QAEtB,IAAI,MAAM,GAAqC,EAAE,CAAA,CAAA,yEAAyE;QAE1H,qBAAqB;QAErB,IAAM,aAAa,GAAQ,cAAM,OAAA,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,EAA3D,CAA2D,CAAC;QAE7F,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YACzB,IAAI,CAAC,oBAAoB,EAAE,CAAC;SAC/B;QAED,IAAI,YAAY,GAAU,EAAE,CAAC;QAE7B,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;YAC3B,UAAU,CAAC,GAAG,CAAC,UAAC,GAAG,EAAE,KAAK;gBACtB,IAAI,WAAW,CAAC;gBACR,IAAA,iCAAa,CAAS;gBAE9B,YAAY,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAU,GAAI,CAAC,YAAY,mBAAgB,CAAC,CAAC,CAAC;gBACpG,0BAA0B,CAAC,KAAK,EAAE,WAAW,EAAE,aAAa,CAAC,CAAA;YAEjE,CAAC,CAAC,CAAA;SACL;aACI,IAAI,OAAO,UAAU,IAAI,QAAQ,EAAE;YACpC,IAAI,WAAW,SAAA,CAAC;YAChB,YAAY,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAI,UAAU,mBAAgB,CAAC,CAAC,CAAC;YACvF,0BAA0B,CAAC,CAAC,EAAE,WAAW,CAAC,CAAA;SAC7C;aACI;YACD,MAAM,qCAAqC,CAAA;SAC9C;QAGD,oCAAoC,KAAK,EAAE,WAAW,EAAE,aAA2B;YAA3B,8BAAA,EAAA,2BAA2B;YAC/E,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,CAAA,CAAC,2BAA2B;YAC9C,YAAY,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,CAAC;gBACrB,IAAM,EAAE,GAAG,KAAG,KAAK,GAAG,CAAG,CAAC;gBAC1B,IAAM,WAAW,GAAG,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC;gBAEzC,IAAI,WAAW,IAAI,QAAQ,EAAE;oBACnB,IAAK,CAAC,QAAQ,GAAG,UAAU,KAAK;wBAClC,IAAI,WAAW,GAAG,KAAK,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;wBAE3F,mCAAmC;wBAC/B,YAAY,CAAC,EAAE,aAAa,eAAA,EAAE,EAAE,IAAA,EAAE,KAAK,OAAA,EAAE,WAAW,aAAA,EAAE,CAAC,CAAA;wBAC3D,IAAI;wBACJ,SAAS;wBACT,yFAAyF;wBACzF,IAAI;oBACR,CAAC,CAAA;iBACJ;qBACI,IAAI,WAAW,IAAI,OAAO,EAAE,EAAC,kCAAkC;oBAC1D,IAAK,CAAC,QAAQ,GAAG,UAAU,KAAK;wBAClC,IAAI,WAAW,GAAG,KAAK,CAAC,aAAa,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;wBAExE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE;4BACvB,WAAW,GAAG,EAAE,CAAC;yBACpB;wBACD,mCAAmC;wBAC/B,YAAY,CAAC,EAAE,aAAa,eAAA,EAAE,EAAE,IAAA,EAAE,KAAK,OAAA,EAAE,WAAW,aAAA,EAAE,CAAC,CAAA;wBAC3D,IAAI;wBACJ,SAAS;wBACT,yFAAyF;wBACzF,IAAI;oBACR,CAAC,CAAA;iBACJ;qBACI;oBACK,IAAK,CAAC,OAAO,GAAG,UAAU,KAAK;wBACjC,IAAM,MAAM,GAAG,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC;wBAE7C,kDAAkD;wBAClD,IAAI,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE;4BAClE,IAAI,WAAW;gCAAE,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;yBAC1D;wBAED,WAAW,GAAG,KAAK,CAAC,aAAa,CAAC;wBAElC,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;4BAC3B,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;yBACzC;6BACI;4BACD,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;yBACtC;wBAED,IAAI,WAAW,GAAG,WAAW,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;wBAEhE,mCAAmC;wBAC/B,YAAY,CAAC,EAAE,aAAa,eAAA,EAAE,EAAE,IAAA,EAAE,KAAK,OAAA,EAAE,WAAW,aAAA,EAAE,CAAC,CAAA;wBAC3D,IAAI;wBACJ,SAAS;wBACT,yFAAyF;wBACzF,IAAI;oBACR,CAAC,CAAA;iBACJ;YACL,CAAC,CAAC,CAAA;QACN,CAAC;QAGD,IAAM,YAAY,GAAG,UAAC,EAAyC;gBAAvC,gCAAa,EAAE,UAAE,EAAE,gBAAK,EAAE,4BAAW;YACzD,UAAU,EAAE,CAAC;YACb,IAAI,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE;gBAElE,0DAA0D;gBAC1D,IAAI,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE;oBACrB,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;iBAC5B;qBACI;oBACD,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;oBACnB,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC;iBACnC;aAEJ;iBACI,EAAC,0BAA0B;gBAE5B,0CAA0C;gBAC1C,IAAI,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE;oBAErB,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;iBAC5B;qBACI;oBACD,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC;iBACnC;aAEJ;YACD,uBAAuB;YACvB,IAAG,SAAS,CAAC,MAAM,EAAC;gBAChB,IAAM,MAAM,GAAE,QAAQ,CAAC,aAAa,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC;gBACxD,iBAAO,CAAC,OAAO,CAAC,OAAO,CAAC,sBAAsB,EAAC,MAAM,EAAC,SAAS,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;aACtF;iBACG;gBACA,sBAAsB,EAAE,CAAC;aAC5B;QAGL,CAAC,CAAA;QAGD,IAAM,sBAAsB,GAAG;YAC3B,IAAM,iBAAiB,GAAG,aAAa,EAAE,CAAC;YAC1C,iBAAiB,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,CAAC;gBAG1B,kDAAkD;gBAClD,4CAA4C;gBAC5C,IAAI;gBAGJ,IAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,UAAC,IAAI,EAAE,MAAM;oBAE7C,kCAAkC;oBAClC,IAAM,GAAG,GAAG,MAAI,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,MAAG,CAAC;oBAExD,IAAM,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,CAAC;wBAEpD,IAAM,EAAE,GAAG,IAAI,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;wBAChC,IAAM,KAAK,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;wBAExC,IAAM,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;wBAExC,IAAI,KAAK,EAAE;4BACP,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAA;yBACrC;6BACI;4BACD,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAA;yBACpC;wBAED,+BAA+B;wBAC/B,OAAO,UAAU,CAAC;oBACtB,CAAC,CAAC,CAAA;oBAEF,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;wBACjB,OAAO,MAAM,CAAC;qBACjB;oBAED,qDAAqD;oBAErD,8BAA8B;oBAC9B,OAAW,IAAI,CAAC,GAAG,CAAC,UAAC,CAAC,EAAE,KAAK;wBACzB,IAAI,CAAC,CAAC,KAAK,CAAC,OAAO,KAAK,MAAM,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE;4BACjD,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;yBAC5B;wBACD,OAAO,CAAC,CAAC;oBACb,CAAC,CAAC,SAAC;gBAEP,CAAC,EAAE,EAAE,CAAC,CAAA,CAAA,kBAAkB;gBAExB,IAAI,GAAG,GAAG,CAAC,CAAC;gBAGZ,IAAI,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE;oBAC1B,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;yBACvC,GAAG,CAAC,UAAC,KAAK,EAAE,CAAC;wBACV,sDAAsD;wBAEtD,IAAI,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,IAAI,MAAM,EAAE;4BAC1C,gCAAgC;4BACpC,KAAK,CAAC,KAAK,CAAC,OAAO,GAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC;4BACnD,IAAM,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,UAAU,EAAC,EAAE,CAAC,CAAC;4BAChE,KAAK,CAAC,KAAK,CAAC,SAAS,GAAC,MAAM,CAAC;yBAE5B;6BACI;4BAED,mDAAmD;4BACnD,mDAAmD;4BAEnD,SAAS;4BAET,0BAA0B;4BAC1B,wBAAwB;4BAExB,kDAAkD;4BAElD,2CAA2C;4BAC3C,2CAA2C;4BAE3C,wEAAwE;4BACxE,IAAI;4BACJ,4BAA4B;4BAC5B,KAAK,CAAC,KAAK,CAAC,OAAO,GAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC;4BACnD,KAAK,CAAC,KAAK,CAAC,SAAS,GAAC,kCAAkC,CAAC;yBAE5D;oBAEL,CAAC,CAAC,CAAC;iBAEV;YAEL,CAAC,CAAC,CAAA;QACN,CAAC,CAAA;IACL,CAAC;IACL,gBAAC;AAAD,CAlgBA,AAkgBC,IAAA;AAwCD,2EAA2E;AAC3E;IACI,IAAI,CAAC,EACD,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;IAE/C,IAAI,WAAW,GAAG;QACd,YAAY,EAAE,eAAe;QAC7B,aAAa,EAAE,gBAAgB;QAC/B,eAAe,EAAE,eAAe;QAChC,kBAAkB,EAAE,qBAAqB;KAC5C,CAAA;IAED,KAAK,CAAC,IAAI,WAAW,EAAE;QACnB,IAAI,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;YAC3B,OAAO,WAAW,CAAC,CAAC,CAAC,CAAC;SACzB;KACJ;AACL,CAAC;AAED;IACI,IAAI,CAAC,EACD,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;IAE/C,IAAI,UAAU,GAAG;QACb,WAAW,EAAE,cAAc;QAC3B,aAAa,EAAE,gBAAgB;QAC/B,eAAe,EAAE,eAAe;QAChC,kBAAkB,EAAE,qBAAqB;KAC5C,CAAA;IAED,KAAK,CAAC,IAAI,UAAU,EAAE;QAClB,IAAI,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;YAC3B,OAAO,UAAU,CAAC,CAAC,CAAC,CAAC;SACxB;KACJ;AACL,CAAC;AAEA,MAAc,CAAC,SAAS,GAAG,SAAS,CAAC","file":"index.js","sourcesContent":["import Animate from './animate'\nimport { Transition } from '../js/util/index';\n\n\nclass FsLibrary {\n\n    constructor(cms_selector: string) {\n\n        this.cms_selector = cms_selector;\n\n    }\n\n    private cms_selector: string;\n\n    private animation: Animatn = {\n        enable: true,\n        duration: 250,\n        easing: 'ease-in-out',\n        // effects: 'fade',\n        effects: 'translate(0px,0px)'\n    };\n\n    private initialLayoutMode;\n\n    private addClass: boolean;\n\n    private addClassConfig: AddClass;\n\n    private animationStyle: string = `\n        \n        .fslib-normal{\n            position:relative;\n        }\n\n        .fslib-normal>div{\n            justify-content:left;\n        }\n\n        \n    @keyframes fade-in {\n        0% {\n            opacity: 0;\n           transform:{{transform}};\n        }\n        100% {\n            transform:translate(0) rotate3d(0) rotate(0) scale(1);\n            opacity: 1;\n        }\n      }\n      \n      .fslib-fadeIn {\n        animation-name: fade-in;\n        animation-duration: {{duration}}s;\n        animation-iteration-count: 1;\n        animation-timing-function: {{easing}};\n        animation-fill-mode: forwards;\n      }\n`;\n\n    // private next(tl, queue, getTransform = null) {\n    //     if (queue.length) {\n    //         let nextTween = queue.shift();\n\n    //         if (getTransform) {\n    //             nextTween[2].transform = getTransform();\n    //         }\n\n    //         tl.add(TweenLite.to.apply(null, nextTween));\n\n    //     }\n    // }\n\n    // private enQueue(tl, tween, queue) {\n\n    //     if (tl.isActive()) {\n    //         queue.unshift(tween);\n    //     } else {\n    //         tl.add(TweenLite.to.apply(null, tween));\n    //     }\n    // }\n\n    private makeStyleSheet({ duration = 1, easing = 'ease-in-out', transform = 'translate(0)' }) {\n\n        this.animationStyle = this.animationStyle.replace('{{duration}}', '' + duration);\n        this.animationStyle = this.animationStyle.replace('{{ease}}', easing);\n        this.animationStyle = this.animationStyle.replace('{{transform}}', transform);\n\n        const head = document.head || document.getElementsByTagName('head')[0];\n        const style: any = document.createElement('style');\n        head.appendChild(style);\n\n        style.type = 'text/css';\n        if (style.styleSheet) {\n            // This is required for IE8 and below.\n            style.styleSheet.cssText = this.animationStyle;\n        } else {\n            style.appendChild(document.createTextNode(this.animationStyle));\n        }\n\n        return style;\n    }\n\n    /**\n     * Combine all the collection items into one collection.\n     */\n    public combine() {\n\n        //get all collections\n        const master_collection: any = [].slice.call(document.querySelectorAll(this.cms_selector));\n\n        //copies the cms items into the first collection list\n        master_collection[0].innerHTML = (\n            [...master_collection].reduce((curr, items) => {\n                //gets all the items  \n                return [...curr, ...items.innerHTML]\n            }, []).join(\"\")\n        )\n\n        //deletes the rest collection list\n        master_collection.forEach((elem: Element, i: number) => {\n            if (i > 0) {\n                elem.outerHTML = \"\"\n            }\n        })\n\n\n    }\n\n\n\n    public loadmore(config: LoadMore = { button: \"\", actualLoadMore: false, initialLoad: 12, loadPerClick: 12, animation: this.animation }): void {\n\n\n        if(!config.actualLoadMore) return;\n\n\n        if (config.animation) {\n            const effects = config.animation.effects.replace('fade', '');\n            let { duration, easing } = config.animation;\n            duration = duration? duration/1000 :1;\n            easing = easing || 'linear';\n            this.makeStyleSheet({ duration, easing, transform: effects })\n\n        }\n        else {\n            this.makeStyleSheet({});\n        }\n\n        const parent: any = document.querySelector(this.cms_selector);\n        const collection: any[] = [].slice.call(parent.children);\n        const clone: any[] = [].slice.call(parent.cloneNode(true).children);\n        this.setInitialLayoutMode();\n\n        const { button, actualLoadMore, initialLoad, loadPerClick } = config;\n\n        let reserve = [];\n        reserve = clone.filter((child, i) => {\n\n            if (i < initialLoad) {\n                return false;\n            }\n\n            collection[i].outerHTML = \"\";\n            return true;\n        });\n\n        (<any>document.querySelector(button)).onclick = () => {\n            const addon = reserve.splice(0, loadPerClick);\n            addon.map((elem) => {\n                elem.classList.add('fslib-fadeIn')\n                elem.addEventListener(whichAnimationEvent(), () => {\n                    elem.classList.remove('fslib-fadeIn')\n\n                })\n                document.querySelector(this.cms_selector).appendChild(elem);\n            })\n\n            if (this.addClass) {\n                this.addClasses(this.addClassConfig);\n            }\n\n            if (reserve.length == 0) {\n                (<any>document.querySelector(button)).style.display = 'none';\n            }\n        }\n\n\n\n    }\n\n\n    /**\n     * \n     * @param container The css selector of the parent container elem of the list you want to add classnames to.\n     * @param config  defined as\n     *  {\n     *     classNames: Array<AltClass>; //list of classnames you want to add\n     *     frequency: number; //The frequency or order of addition of class to the list\n     *     start: number; //position of list item to start with\n     * }\n     */\n    public addClasses(config: AddClass = { classNames: [], frequency: 2, start: 1 }): void {\n        const parent: any = document.querySelector(this.cms_selector);\n        const { frequency, start, classNames } = config;\n\n        this.addClassConfig = config;\n        this.addClass = true;\n\n        if (frequency < 0) {\n            throw \"unaccepted value passed as frequency\";\n        }\n        else if (start < 1) {\n            throw \"unaccepted value passed as start\";\n        }\n\n        classNames.map(({ target, alt }) => {\n            const list = parent.querySelectorAll(target);\n            for (let j = start - 1; j < list.length; j += frequency) {\n\n                const addon = alt.replace(/\\./g, \"\")\n                if (list[j].className.indexOf(addon) < 0) {\n                    list[j].className += \" \" + addon\n                }\n\n                if (frequency == 0) {\n                    break;\n                }\n            }\n        })\n    }\n\n    private setInitialLayoutMode() {\n\n        const get_cms_items: any = () => [].slice.call(document.querySelectorAll(this.cms_selector));\n        //storing initial layoutMode\n        this.initialLayoutMode = this.getLayoutMode();\n    }\n\n    private getLayoutMode() {\n\n        const get_cms_items: any = () => [].slice.call(document.querySelectorAll(this.cms_selector));\n        \n        return (\n            get_cms_items().map((elem, i) => {\n                elem.style['justify-content'] = 'left';\n                elem.style['overflow'] = 'hidden';\n                return (\n                    [].slice.call(elem.children).map((item, j) => {\n                        const coordinates = item.getBoundingClientRect();\n                        return {\n                            x: coordinates.left,\n                            y: coordinates.top\n                        };\n                    }))\n            })\n        );\n    }\n\n    /**\n     * \n     * @param cms_selector \n     */\n    public cmsfilter(config={cms_filter :[], filter_type:'single', animation:this.animation}) {\n\n        let {cms_filter,filter_type,animation} =config;\n\n        filter_type = filter_type ? filter_type :(typeof cms_filter =='string')? 'single' : 'multi';\n\n        const self = this;\n        if (animation) {\n            animation.enable = !/^false$/.test(String(animation.enable));\n            const effects = animation.effects.replace('fade', '');\n            animation.effects = effects;\n\n            if (animation.effects.indexOf('translate') < 0) {\n                animation.effects += ' translate(0px,0px)  '\n            }\n            this.animation = animation;\n        }\n        animation = this.animation;\n        console.log(animation)\n\n        let clickCheck = 0;\n        const tl = [];\n        const queue = [];\n\n        const filterQueue = []\n\n        let filter: Array<{ [key: string]: string }> = []//2D array to hold categories of filter selectors and their corresponding\n\n        //get all collections\n\n        const get_cms_items: any = () => [].slice.call(document.querySelectorAll(this.cms_selector));\n\n        if (!this.initialLayoutMode) {\n            this.setInitialLayoutMode();\n        }\n\n        let filter_group: any[] = [];\n\n        if (Array.isArray(cms_filter)) {\n            cms_filter.map((val, index) => {\n                let prevClicked;\n                const { filter_option } = val;\n\n                filter_group = [].slice.call(document.querySelectorAll(`${(<any>val).filter_group} [data-search]`));\n                assignChangeEventToButtons(index, prevClicked, filter_option)\n\n            })\n        }\n        else if (typeof cms_filter == \"string\") {\n            let prevClicked;\n            filter_group = [].slice.call(document.querySelectorAll(`${cms_filter} [data-search]`));\n            assignChangeEventToButtons(0, prevClicked)\n        }\n        else {\n            throw \"Incorrect type passed as cms_filter\"\n        }\n\n\n        function assignChangeEventToButtons(index, prevClicked, filter_option = filter_type) {\n            filter[index] = {} //initialise default values\n            filter_group.map((elem, j) => {\n                const id = `${index}${j}`;\n                const tag_element = elem && elem.tagName;\n\n                if (tag_element == \"SELECT\") {\n                    (<any>elem).onchange = function (event) {\n                        let filter_text = event.currentTarget.selectedOptions[0].getAttribute(\"data-search\") || '';\n\n                        // if (!self.timeline.isActive()) {\n                            filterHelper({ filter_option, id, index, filter_text })\n                        // }\n                        // else {\n                        //     filterQueue.unshift(() => filterHelper({ filter_option, id, index, filter_text }))\n                        // }\n                    }\n                }\n                else if (tag_element == \"INPUT\") {//handle checkbox and radio button\n                    (<any>elem).onchange = function (event) {\n                        let filter_text = event.currentTarget.getAttribute(\"data-search\") || '';\n\n                        if (!event.target.checked) {\n                            filter_text = '';\n                        }\n                        // if (!self.timeline.isActive()) {\n                            filterHelper({ filter_option, id, index, filter_text })\n                        // }\n                        // else {\n                        //     filterQueue.unshift(() => filterHelper({ filter_option, id, index, filter_text }))\n                        // }\n                    }\n                }\n                else {\n                    (<any>elem).onclick = function (event) {\n                        const active = event.currentTarget.className;\n\n                        //only one element should have active class for or\n                        if (/^single$/i.test(filter_type) || /^single$/i.test(filter_option)) {\n                            if (prevClicked) prevClicked.classList.remove(\"active\")\n                        }\n\n                        prevClicked = event.currentTarget;\n\n                        if (active.includes(\"active\")) {\n                            prevClicked.classList.remove(\"active\")\n                        }\n                        else {\n                            prevClicked.classList.add(\"active\")\n                        }\n\n                        let filter_text = prevClicked.getAttribute(\"data-search\") || '';\n\n                        // if (!self.timeline.isActive()) {\n                            filterHelper({ filter_option, id, index, filter_text })\n                        // }\n                        // else {\n                        //     filterQueue.unshift(() => filterHelper({ filter_option, id, index, filter_text }))\n                        // }\n                    }\n                }\n            })\n        }\n\n\n        const filterHelper = ({ filter_option, id, index, filter_text }) => {\n            clickCheck++;\n            if (/^single$/i.test(filter_type) || /^single$/i.test(filter_option)) {\n\n                //checks if it has previously been clicked                \n                if (id in filter[index]) {\n                    delete filter[index][id];\n                }\n                else {\n                    filter[index] = {};\n                    filter[index][id] = filter_text;\n                }\n\n            }\n            else {//it is definitely \"multi\"\n\n                //checks if it has previously been clicked\n                if (id in filter[index]) {\n\n                    delete filter[index][id];\n                }\n                else {\n                    filter[index][id] = filter_text;\n                }\n\n            }\n            //try to fix queue here\n            if(animation.enable){\n                const target= document.querySelector(this.cms_selector);\n                Animate.methods.animate(findAndMatchFilterText,target,animation).then(console.log);\n            }\n            else{\n                findAndMatchFilterText();                \n            }\n          \n\n        }\n\n\n        const findAndMatchFilterText = () => {\n            const master_collection = get_cms_items();\n            master_collection.map((elem, i) => {\n\n\n                // if (!elem.classList.contains('fslib-normal')) {\n                //     // elem.classList.add('fslib-normal')\n                // }\n\n\n                const search_result = filter.reduce((curr, search) => {\n\n                    //creating a regex to test against\n                    const val = `(${Object[\"values\"]((search)).join(\"|\")})`;\n\n                    const result = [].slice.call(elem.children).map((item, j) => {\n\n                        const re = new RegExp(val, \"i\");\n                        const valid = re.test(item.textContent);\n\n                        const clonedItem = item.cloneNode(true);\n\n                        if (valid) {\n                            clonedItem.style.display = \"block\"\n                        }\n                        else {\n                            clonedItem.style.display = \"none\"\n                        }\n\n                        // return clonedItem.outerHTML;\n                        return clonedItem;\n                    })\n\n                    if (curr.length < 1) {\n                        return result;\n                    }\n\n                    // return [...curr.filter((a) => result.includes(a))]\n\n                    //intersections of the results\n                    return [...curr.map((a, index) => {\n                        if (a.style.display !== result[index].style.display) {\n                            a.style.display = \"none\";\n                        }\n                        return a;\n                    })]\n\n                }, [])//.join(\"\").trim()\n\n                let pos = 0;\n\n\n                if (search_result.length > 1) {\n                    [].slice.call(master_collection[i].children)\n                        .map((child, k) => {\n                            // child.style.display=search_result[k].style.display;\n\n                            if (search_result[k].style.display == 'none') {\n                                // css(child, 'display', 'none')\n                            child.style.display=search_result[k].style.display;\n                            const effect = String(animation.effects).replace(/^fade /gi,\"\");\n                            child.style.transform=effect;\n\n                            }\n                            else {\n\n                                // const finalX = this.initialLayoutMode[i][pos].x;\n                                // const finalY = this.initialLayoutMode[i][pos].y;\n\n                                // pos++;\n\n                                // const getProp = () => {\n                                //     child.style = '';\n\n                                //     const curr = child.getBoundingClientRect();\n                                  \n                                //     const childDeltaX = finalX - curr.x;\n                                //     const childDeltaY = finalY - curr.y;\n\n                                //     return `translate(${childDeltaX}px, ${childDeltaY}px) rotateZ(0)`\n                                // }\n                                // css(child, 'display', '')\n                                child.style.display=search_result[k].style.display;\n                                child.style.transform='rotateZ(0) translate(0) scale(1)';\n    \n                            }\n\n                        });\n\n                }\n\n            })\n        }\n    }\n}\n\ninterface AltClass {\n    target: string;\n    alt: string\n}\n\ninterface LoadMore {\n    button: string;\n    actualLoadMore: boolean;\n    initialLoad: number;\n    loadPerClick: number;\n    animation?: Animatn\n}\n\ninterface AddClass {\n    classNames: Array<AltClass>; //list of classnames you want to add\n    frequency: number; //The frequency or order of addition of class to the list\n    start: number; //position of list item to start with\n}\n\ninterface FilterGroup {\n    filter_group: string;\n    filter_option: string\n}\n\ninterface Animatn {\n    enable?: boolean;\n    easing?: string;\n    duration?: number;\n    effects?: string;\n}\n\n\ninterface Filter {\n    cms_filter: FilterGroup[] | string;\n    filter_type: string;\n}\n\n\n// Function from David Walsh: http://davidwalsh.name/css-animation-callback\nfunction whichTransitionEvent() {\n    var t,\n        el = document.createElement(\"fakeelement\");\n\n    var transitions = {\n        \"transition\": \"transitionend\",\n        \"OTransition\": \"oTransitionEnd\",\n        \"MozTransition\": \"transitionend\",\n        \"WebkitTransition\": \"webkitTransitionEnd\"\n    }\n\n    for (t in transitions) {\n        if (el.style[t] !== undefined) {\n            return transitions[t];\n        }\n    }\n}\n\nfunction whichAnimationEvent() {\n    var t,\n        el = document.createElement(\"fakeelement\");\n\n    var animations = {\n        \"animation\": \"animationend\",\n        \"OAnimationn\": \"oAnimationnEnd\",\n        \"MozAnimationn\": \"animationnend\",\n        \"WebkitAnimationn\": \"webkitAnimationnEnd\"\n    }\n\n    for (t in animations) {\n        if (el.style[t] !== undefined) {\n            return animations[t];\n        }\n    }\n}\n\n(window as any).FsLibrary = FsLibrary;"]}